---
layout: post
title: '`ncdu` - a ncurses based `du`'
tags: ubuntu 20.04 22.04 24.04 server
permalink: ncdu.html
image: /data/img/wide/disk.jpg
---

`ncdu` is a console (ncurses based) disk usage analyser, like [baobab for Gnome](https://apps.gnome.org/Baobab/){:.external} or [windirstat for Win*](https://windirstat.net/){:.external}, looking like this:

<asciinema-player src="data/a/ncdu.jsonl" preload autoplay loop cols="80" rows="24" poster="npt:5.1" font-size="small"></asciinema-player>

:point_up: `du` (or `ncdu`) and `df` may not agree on disk usage, see also [df vs du - where my free disk space is gone?](du-vs-df.html).

:warning: ***Danger*** **`ncdu` (by default) can delete files, so I highly recommend to disable that feature.**

## Safe configuration for `ncdu` version >= 1.19 (tested on [24.04](/tag/24.04.html){:.set-5})
`ncdu`, starting from version 1.19 can be configured in files `/etc/ncdu.conf` and `$HOME/.config/ncdu/config`.



Example configuration file:
```properties
# @file ncdu.conf
# @author marc@pignat.org

# make ncdu read-only
# -rr does the same
--disable-delete
--disable-shell
```

If you use the global `/etc/ncdu.conf`, make sure it is world-readable :

```bash
sudo chmod a+r /etc/profile.d/00-ncdu-readonly.sh
```

## Safe configuration for `ncdu` version < 1.19 (tested on [20.04](/tag/20.04.html){:.set-5} and [22.04](/tag/22.04.html){:.set-5})
   * Create the world-readable file `/etc/profile.d/00-ncdu-readonly.sh`
     ```bash
     alias ncdu='ncdu -rr
     ```
   * ***OR*** run this script:
     ```bash
     echo alias ncdu=\'ncdu -rr\' | sudo tee /etc/profile.d/00-ncdu-readonly.sh
     sudo chmod a+r /etc/profile.d/00-ncdu-readonly.sh
     ```
